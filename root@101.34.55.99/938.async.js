"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[938],{64593:function(ze,te,z){z.d(te,{Z:function(){return pe}});var ne=z(97857),f=z.n(ne),le=z(5574),C=z.n(le),v=z(67294),re=z(93967),i=z.n(re),e=z(85893),J=function(l){var H=l.title,S=l.content;return(0,e.jsxs)("li",{className:"iztro-palace-center-item",children:[(0,e.jsx)("label",{children:H}),(0,e.jsx)("span",{children:S})]})},F=z(15276),se=function(l){var H=l.index,S=l.scope,o=(0,v.useRef)(null),r=(0,v.useMemo)(function(){if(S){var t=document.getElementsByClassName("iztro-astrolabe-theme-default")[0],y=getComputedStyle(t);return y.getPropertyValue("--iztro-color-".concat(S))}return"rgba(245,0,0)"},[S]);return(0,v.useEffect)(function(){var t=H,y=o.current;if(!(!y||t<0)){var N=y.getBoundingClientRect(),a=N.height,u=N.width;y.width=u,y.height=a;var s=u/2,x=a/2,h=[[0,x*2],[0,x*1.5],[0,x*.5],[0,0],[s*.5,0],[s*1.5,0],[s*2,0],[s*2,x*.5],[s*2,x*1.5],[s*2,x*2],[s*1.5,x*2],[s*.5,x*2]],g=y.getContext("2d");if(g){g.clearRect(0,0,y.width,y.height),g.strokeStyle=r,g.lineWidth=1,g.globalAlpha=.5;var D=(0,F.fixIndex)(t+6),j=(0,F.fixIndex)(t+4),w=(0,F.fixIndex)(t-4);g.beginPath(),g.moveTo(h[D][0],h[D][1]),g.lineTo(h[t][0],h[t][1]),g.lineTo(h[j][0],h[j][1]),g.lineTo(h[w][0],h[w][1]),g.lineTo(h[t][0],h[t][1]),g.stroke()}}},[H,r]),(0,e.jsx)("canvas",{id:"palace-line",className:S,style:{position:"absolute",width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},ref:o})},O=z(91704),M=z(76686),K=z(76924),ie=function(l){var H,S,o=l.astrolabe,r=l.horoscope,t=l.arrowIndex,y=l.arrowScope,N=l.horoscopeDate,a=N===void 0?new Date:N,u=l.horoscopeHour,s=u===void 0?0:u,x=l.setHoroscopeDate,h=l.setHoroscopeHour,g=(0,v.useMemo)(function(){return[{title:"\u4E94\u884C\u5C40\uFF1A",content:o==null?void 0:o.fiveElementsClass},{title:"\u5E74\u9F84(\u865A\u5C81)\uFF1A",content:"".concat(r==null?void 0:r.age.nominalAge," \u5C81")},{title:"\u56DB\u67F1\uFF1A",content:o==null?void 0:o.chineseDate},{title:"\u9633\u5386\uFF1A",content:o==null?void 0:o.solarDate},{title:"\u519C\u5386\uFF1A",content:o==null?void 0:o.lunarDate},{title:"\u65F6\u8FB0\uFF1A",content:"".concat(o==null?void 0:o.time,"(").concat(o==null?void 0:o.timeRange,")")},{title:"\u751F\u8096\uFF1A",content:o==null?void 0:o.zodiac},{title:"\u661F\u5EA7\uFF1A",content:o==null?void 0:o.sign},{title:"\u547D\u4E3B\uFF1A",content:o==null?void 0:o.soul},{title:"\u8EAB\u4E3B\uFF1A",content:o==null?void 0:o.body},{title:"\u547D\u5BAB\uFF1A",content:o==null?void 0:o.earthlyBranchOfSoulPalace},{title:"\u8EAB\u5BAB\uFF1A",content:o==null?void 0:o.earthlyBranchOfBodyPalace}]},[o,r]),D=(0,v.useMemo)(function(){var m=a!=null?a:new Date,k=(0,O.normalizeDateStr)(m),p=C()(k,3),b=p[0],I=p[1],E=p[2],B=new Date(b,I-1,E);return{solar:"".concat(b,"-").concat(I,"-").concat(E),lunar:(0,O.solar2lunar)(m).toString(!0),prevDecadalDisabled:B.setFullYear(B.getFullYear()-1)}},[a]),j=function(k,p){if(!(o!=null&&o.solarDate))return!0;var b=(0,O.normalizeDateStr)(a),I=C()(b,3),E=I[0],B=I[1],d=I[2],c=new Date(E,B-1,d),Y=(0,O.normalizeDateStr)(o.solarDate),n=C()(Y,3),$=n[0],G=n[1],U=n[2],R=new Date($,G-1,U),A=s;switch(k){case"hourly":A=s+p,s+p>11?(c.setDate(c.getDate()+1),A=0):s+p<0&&(c.setDate(c.getDate()-1),A=11);break;case"daily":c.setDate(c.getDate()+p);break;case"monthly":c.setMonth(c.getMonth()+p);break;case"yearly":case"decadal":c.setFullYear(c.getFullYear()+p);break}c.getTime()>=R.getTime()&&(x==null||x(c),h==null||h(A))},w=(0,v.useCallback)(function(m,k,p){if(!(o!=null&&o.solarDate))return!0;var b=(0,O.normalizeDateStr)(m),I=C()(b,3),E=I[0],B=I[1],d=I[2],c=new Date(E,B-1,d),Y=(0,O.normalizeDateStr)(o.solarDate),n=C()(Y,3),$=n[0],G=n[1],U=n[2],R=new Date($,G-1,U);switch(k){case"hourly":s+p>11?c.setDate(c.getDate()+1):s+p<0&&c.setDate(c.getDate()-1);break;case"daily":c.setDate(c.getDate()+p);break;case"monthly":c.setMonth(c.getMonth()+p);break;case"yearly":case"decadal":c.setFullYear(c.getFullYear()+p);break}return c.getTime()<R.getTime()},[s,o]);return(0,e.jsxs)("div",{className:"iztro-center-palace",children:[(o==null?void 0:o.earthlyBranchOfSoulPalace)&&(0,e.jsx)(se,{scope:y,index:t!=null?t:(0,F.fixEarthlyBranchIndex)(o.earthlyBranchOfSoulPalace)}),(0,e.jsxs)("h3",{className:"center-title",children:[(0,e.jsx)("span",{className:"gender gender-".concat((0,M.kot)((H=o==null?void 0:o.gender)!==null&&H!==void 0?H:"")),children:(0,M.kot)((S=o==null?void 0:o.gender)!==null&&S!==void 0?S:"")==="male"?"\u2642":"\u2640"}),(0,e.jsx)("span",{children:"\u57FA\u672C\u4FE1\u606F"})]}),(0,e.jsx)("ul",{className:"basic-info",children:g.map(function(m,k){return(0,e.jsx)(J,f()({},m),k)})}),(0,e.jsx)("h3",{className:"center-title",children:"\u8FD0\u9650\u4FE1\u606F"}),(0,e.jsxs)("ul",{className:"basic-info",children:[(0,e.jsx)(J,{title:"\u519C\u5386\uFF1A",content:D.lunar}),(0,e.jsxs)("div",{className:"solar-horoscope",children:[(0,e.jsx)(J,{title:"\u9633\u5386\uFF1A",content:D.solar}),(0,e.jsx)("span",{className:"today",onClick:function(){return x==null?void 0:x(new Date)},children:"\u4ECA"})]})]}),(0,e.jsxs)("div",{className:"horo-buttons",children:[(0,e.jsx)("span",{className:i()("center-button",{disabled:w(D.solar,"yearly",-10)}),onClick:function(){return j("yearly",-10)},children:"\u25C0\u9650"}),(0,e.jsx)("span",{className:i()("center-button",{disabled:w(D.solar,"yearly",-1)}),onClick:function(){return j("yearly",-1)},children:"\u25C0\u5E74"}),(0,e.jsx)("span",{className:i()("center-button",{disabled:w(D.solar,"monthly",-1)}),onClick:function(){return j("monthly",-1)},children:"\u25C0\u6708"}),(0,e.jsx)("span",{className:i()("center-button",{disabled:w(D.solar,"daily",-1)}),onClick:function(){return j("daily",-1)},children:"\u25C0\u65E5"}),(0,e.jsx)("span",{className:i()("center-button",{disabled:w(D.solar,"hourly",-1)}),onClick:function(){return j("hourly",-1)},children:"\u25C0\u65F6"}),(0,e.jsx)("span",{className:"center-horo-hour",children:(0,M.t)(K.CHINESE_TIME[s])}),(0,e.jsx)("span",{className:"center-button",onClick:function(){return j("hourly",1)},children:"\u65F6\u25B6"}),(0,e.jsx)("span",{className:"center-button",onClick:function(){return j("daily",1)},children:"\u65E5\u25B6"}),(0,e.jsx)("span",{className:"center-button",onClick:function(){return j("monthly",1)},children:"\u6708\u25B6"}),(0,e.jsx)("span",{className:"center-button",onClick:function(){return j("yearly",1)},children:"\u5E74\u25B6"}),(0,e.jsx)("span",{className:"center-button",onClick:function(){return j("yearly",10)},children:"\u9650\u25B6"})]}),(0,e.jsx)("a",{className:"iztro-copyright",href:"https://github.com/sylarlong/iztro",target:"_blank",children:(0,e.jsxs)("i",{children:["Powered by ",(0,e.jsx)("code",{children:"iztro"})]})})]})},ce=z(9783),de=z.n(ce),ue=z(13769),X=z.n(ue),ve=["horoscopeMutagens","activeHeavenlyStem","hoverHeavenlyStem","palaceHeavenlyStem"],L=function(l){var H=l.horoscopeMutagens,S=l.activeHeavenlyStem,o=l.hoverHeavenlyStem,r=l.palaceHeavenlyStem,t=X()(l,ve),y=(0,v.useMemo)(function(){if(!S)return"";var u=(0,F.getMutagensByHeavenlyStem)((0,M.t)(S)),s=u.indexOf(t.name);return s<0?"":"iztro-star-mutagen-".concat(s)},[S,t.name]),N=(0,v.useMemo)(function(){if(!o)return"";var u=(0,F.getMutagensByHeavenlyStem)((0,M.t)(o)),s=u.indexOf(t.name);return s<0?"":"iztro-star-hover-mutagen-".concat(s)},[o,t.name]),a=(0,v.useMemo)(function(){if(!(!r||S||o)){var u=(0,F.getMutagensByHeavenlyStem)((0,M.t)(r)),s=u.indexOf(t.name);return s<0?"":"iztro-star-self-mutagen-".concat(s)}},[r,S,o]);return(0,e.jsxs)("div",{className:i()("iztro-star","iztro-star-".concat(t.type)),children:[(0,e.jsx)("span",{className:i()("star-with-mutagen",y,a,N,{"iztro-star-self-mutagen":!!a}),children:t.name}),(0,e.jsx)("i",{className:i()("iztro-star-brightness"),children:t.brightness}),t.mutagen&&(0,e.jsx)("span",{className:i()("iztro-star-mutagen","mutagen-".concat(K.MUTAGEN.indexOf((0,M.kot)(t.mutagen)))),children:t.mutagen}),H==null?void 0:H.map(function(u){if(u.mutagen.includes(t.name)&&u.show)return(0,e.jsx)("span",{className:i()("iztro-star-mutagen","mutagen-".concat(u.scope)),children:(0,M.t)(K.MUTAGEN[u.mutagen.indexOf(t.name)])},u.scope)})]})},he=["index","focusedIndex","onFocused","horoscope","activeHeavenlyStem","toggleActiveHeavenlyStem","hoverHeavenlyStem","setHoverHeavenlyStem","showDecadalScope","showYearlyScope","showMonthlyScope","showDailyScope","showHourlyScope","toggleScope"],me=function(l){var H,S,o,r,t=l.index,y=l.focusedIndex,N=l.onFocused,a=l.horoscope,u=l.activeHeavenlyStem,s=l.toggleActiveHeavenlyStem,x=l.hoverHeavenlyStem,h=l.setHoverHeavenlyStem,g=l.showDecadalScope,D=g===void 0?!1:g,j=l.showYearlyScope,w=j===void 0?!1:j,m=l.showMonthlyScope,k=m===void 0?!1:m,p=l.showDailyScope,b=p===void 0?!1:p,I=l.showHourlyScope,E=I===void 0?!1:I,B=l.toggleScope,d=X()(l,he),c=(0,v.useMemo)(function(){var n=[];return(a==null?void 0:a.decadal.index)===t&&n.push(f()(f()({},a.decadal),{},{scope:"decadal",show:D})),(a==null?void 0:a.yearly.index)===t&&n.push(f()(f()({},a.yearly),{},{scope:"yearly",show:w})),(a==null?void 0:a.monthly.index)===t&&n.push(f()(f()({},a.monthly),{},{scope:"monthly",show:k})),(a==null?void 0:a.daily.index)===t&&n.push(f()(f()({},a.daily),{},{scope:"daily",show:b})),(a==null?void 0:a.hourly.index)===t&&n.push(f()(f()({},a.hourly),{},{scope:"hourly",show:E})),(a==null?void 0:a.age.index)===t&&n.push({name:a.age.name,heavenlyStem:void 0,scope:"age",show:!1}),n},[a,D,w,k,b,E]),Y=(0,v.useMemo)(function(){return a?[{mutagen:a.decadal.mutagen,scope:"decadal",show:D},{mutagen:a.yearly.mutagen,scope:"yearly",show:w},{mutagen:a.monthly.mutagen,scope:"monthly",show:k},{mutagen:a.daily.mutagen,scope:"daily",show:b},{mutagen:a.hourly.mutagen,scope:"hourly",show:E}]:[]},[a,D,w,k,b,E]);return(0,e.jsxs)("div",{className:i()("iztro-palace",{"focused-palace":y===t,"opposite-palace":y!=null&&t===(0,F.fixIndex)(y+6),"surrounded-palace":y!=null&&(t===(0,F.fixIndex)(y+4)||t===(0,F.fixIndex)(y-4))}),style:{gridArea:"g".concat(t)},onMouseEnter:function(){return N==null?void 0:N(t)},onMouseLeave:function(){return N==null?void 0:N(void 0)},children:[(0,e.jsx)("div",{className:i()("iztro-palace-major"),children:d.majorStars.map(function(n){return(0,e.jsx)(L,f()({activeHeavenlyStem:u,hoverHeavenlyStem:x,palaceHeavenlyStem:(0,M.kot)(d.heavenlyStem,"Heavenly"),horoscopeMutagens:Y},n),n.name)})}),(0,e.jsx)("div",{className:i()("iztro-palace-minor"),children:d.minorStars.map(function(n){return(0,e.jsx)(L,f()({activeHeavenlyStem:u,hoverHeavenlyStem:x,palaceHeavenlyStem:(0,M.kot)(d.heavenlyStem,"Heavenly"),horoscopeMutagens:Y},n),n.name)})}),(0,e.jsxs)("div",{className:i()("iztro-palace-adj"),children:[(0,e.jsx)("div",{children:d.adjectiveStars.slice(5).map(function(n){return(0,e.jsx)(L,f()({},n),n.name)})}),(0,e.jsx)("div",{children:d.adjectiveStars.slice(0,5).map(function(n){return(0,e.jsx)(L,f()({},n),n.name)})})]}),(0,e.jsxs)("div",{className:i()("iztro-palace-horo-star"),children:[(0,e.jsx)("div",{className:i()("stars"),children:(a==null||(H=a.decadal)===null||H===void 0?void 0:H.stars)&&(a==null||(S=a.decadal)===null||S===void 0?void 0:S.stars[t].map(function(n){return(0,e.jsx)(L,f()({},n),n.name)}))}),(0,e.jsx)("div",{className:i()("stars"),children:(a==null||(o=a.yearly)===null||o===void 0?void 0:o.stars)&&(a==null||(r=a.yearly)===null||r===void 0?void 0:r.stars[t].map(function(n){return(0,e.jsx)(L,f()({},n),n.name)}))})]}),(0,e.jsx)("div",{className:i()("iztro-palace-fate"),children:c==null?void 0:c.map(function(n){return(0,e.jsxs)("span",{className:i()(de()({},"iztro-palace-".concat(n.scope,"-active"),n.show)),onClick:n.scope?function(){return B==null?void 0:B(n.scope)}:void 0,children:[n.name,n.heavenlyStem&&"(".concat(n.heavenlyStem,")")]},n.name)})}),(0,e.jsxs)("div",{className:i()("iztro-palace-footer"),children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:i()("iztro-palace-lft24"),children:[(0,e.jsx)("div",{children:d.changsheng12}),(0,e.jsx)("div",{children:d.boshi12})]}),(0,e.jsxs)("div",{className:i()("iztro-palace-name"),children:[d.name,d.isBodyPalace&&(0,e.jsxs)("span",{className:i()("iztro-palace-name-body"),children:["\xB7",(0,M.t)("bodyPalace")]})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:i()("iztro-palace-scope"),children:[(0,e.jsx)("div",{className:i()("iztro-palace-scope-age"),children:d.ages.join(" ")}),(0,e.jsx)("div",{className:i()("iztro-palace-scope-decadal"),children:d.decadal.range.join(" - ")})]}),(0,e.jsxs)("div",{className:i()("iztro-palace-dynamic-name"),children:[D&&(0,e.jsx)("span",{className:"iztro-palace-dynamic-name-decadal",children:a==null?void 0:a.decadal.palaceNames[t]}),w&&(0,e.jsx)("span",{className:"iztro-palace-dynamic-name-yearly",children:a==null?void 0:a.yearly.palaceNames[t]}),k&&(0,e.jsx)("span",{className:"iztro-palace-dynamic-name-monthly",children:a==null?void 0:a.monthly.palaceNames[t]}),b&&(0,e.jsx)("span",{className:"iztro-palace-dynamic-name-daily",children:a==null?void 0:a.daily.palaceNames[t]}),E&&(0,e.jsx)("span",{className:"iztro-palace-dynamic-name-hourly",children:a==null?void 0:a.hourly.palaceNames[t]})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:i()("iztro-palace-rgt24"),children:[(0,e.jsx)("div",{children:w?a==null?void 0:a.yearly.yearlyDecStar.suiqian12[t]:d.suiqian12}),(0,e.jsx)("div",{children:w?a==null?void 0:a.yearly.yearlyDecStar.jiangqian12[t]:d.jiangqian12})]}),(0,e.jsx)("div",{className:i()("iztro-palace-gz",{"iztro-palace-gz-active":u===(0,M.kot)(d.heavenlyStem,"Heavenly")}),onClick:function(){return s==null?void 0:s((0,M.kot)(d.heavenlyStem,"Heavenly"))},onMouseEnter:function(){return h==null?void 0:h((0,M.kot)(d.heavenlyStem,"Heavenly"))},onMouseLeave:function(){return h==null?void 0:h(void 0)},children:(0,e.jsxs)("span",{className:i()({"iztro-palace-gz-active":u===(0,M.kot)(d.heavenlyStem,"Heavenly")}),children:[d.heavenlyStem,d.earthlyBranch]})})]})]})]})},ye=function(l){var H=l.birthday,S=l.birthTime,o=l.astrolabe,r=l.horoscope,t=l.setHoroscope,y=(0,v.useState)(),N=C()(y,2),a=N[0],u=N[1],s=(0,v.useState)(),x=C()(s,2),h=x[0],g=x[1],D=(0,v.useState)(),j=C()(D,2),w=j[0],m=j[1],k=(0,v.useState)(!1),p=C()(k,2),b=p[0],I=p[1],E=(0,v.useState)(!1),B=C()(E,2),d=B[0],c=B[1],Y=(0,v.useState)(!1),n=C()(Y,2),$=n[0],G=n[1],U=(0,v.useState)(!1),R=C()(U,2),A=R[0],Se=R[1],xe=(0,v.useState)(!1),q=C()(xe,2),Z=q[0],fe=q[1],ge=(0,v.useState)(),_=C()(ge,2),V=_[0],ee=_[1],je=(0,v.useState)(),ae=C()(je,2),Q=ae[0],oe=ae[1],He=function(T){switch(T){case"decadal":I(!b);break;case"yearly":c(!d);break;case"monthly":G(!$);break;case"daily":Se(!A);break;case"hourly":fe(!Z);break}},De=function(T){u(T===a?void 0:T)},we=(0,v.useMemo)(function(){if(Z)return{arrowIndex:r==null?void 0:r.hourly.index,arrowScope:"hourly"};if(A)return{arrowIndex:r==null?void 0:r.daily.index,arrowScope:"daily"};if($)return{arrowIndex:r==null?void 0:r.monthly.index,arrowScope:"monthly"};if(d)return{arrowIndex:r==null?void 0:r.yearly.index,arrowScope:"yearly"};if(b)return{arrowIndex:r==null?void 0:r.decadal.index,arrowScope:"decadal"}},[b,d,$,A,Z,r]);return(0,v.useEffect)(function(){var P,T;ee((P=l.horoscopeDate)!==null&&P!==void 0?P:new Date),oe((T=l.horoscopeHour)!==null&&T!==void 0?T:0)},[l.horoscopeDate,l.horoscopeHour]),(0,v.useEffect)(function(){t(V!=null?V:new Date,Q)},[V,Q]),H?(0,e.jsxs)("div",{className:i()("iztro-astrolabe","iztro-astrolabe-theme-default"),children:[o==null?void 0:o.palaces.map(function(P,T){return(0,e.jsx)(me,f()({focusedIndex:w,onFocused:m,horoscope:r,showDecadalScope:b,showYearlyScope:d,showMonthlyScope:$,showDailyScope:A,showHourlyScope:Z,toggleScope:He,activeHeavenlyStem:a,toggleActiveHeavenlyStem:De,hoverHeavenlyStem:h,setHoverHeavenlyStem:g},P),P.earthlyBranch)}),(0,e.jsx)(ie,f()({astrolabe:o,horoscope:r,horoscopeDate:V,horoscopeHour:Q,setHoroscopeDate:ee,setHoroscopeHour:oe},we))]}):(0,e.jsx)("p",{className:"please-select",children:"\u8BF7\u9009\u62E9\u4E00\u4E2A\u547D\u4E3B"})},pe=ye},2607:function(){}}]);
